<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
>
	<div id="modalProduct" class="modal fade" tabindex="-1" aria-hidden="true">
		<h:form id="form_pesquisa_produto_modal" styleClass="form-horizontal form-row-seperated" prependId="false">	
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-body">
						<div  data-always-visible="1" data-rail-visible1="1">
							<h:panelGroup layout="block" styleClass="row" id="produtoPesquisaModal">
								<div class="col-md-12">
									<div class="portlet light">
										<div class="portlet-title">
										
											<div class="caption">
												<i class="icon-magnifier font-green-sharp"></i>
												<span class="caption-subject font-green-sharp bold uppercase">Pesquisar</span>
												<span class="caption-helper">Pesquise o produto ou serviço</span>
											</div>
											<div class="actions btn-set">
												<button jsf:action="#{bean.produtoModalMBean.pesquisar()}" class="btn green-haze btn-circle ">
													<i class="fa fa-search"></i> Pesquisar
													<f:ajax execute="@form" render="form_pesquisa_produto_modal" />
												</button>
												<button class="btn btn-circle" data-dismiss="modal" aria-hidden="true">
													<i class="fa fa-times"></i> Fechar
												</button>
											</div>
										</div>
										<div class="portlet-body">
											<div class="form-body">
												<div class="row">
													<div class="col-md-6">
														<div class="form-group">
															<label class="control-label col-md-3">Código </label>
															<div class="col-md-9">
																<h:inputText id="codProdutoPesqModal" pt:name="codProdutoPesqModal" maxlength="20" styleClass="form-control uppercase noespace" pt:placeholder="ex: COD0001FE" 
																	value="#{bean.produtoModalMBean.produtoPesq.codProduto}">
																</h:inputText>
																	<f:passThroughAttribute name="data-inputmask" value="'alias': 'upper'"/>
															</div>
														</div>
													</div>	
													<div class="col-md-6">
														<div class="form-group">
															<label class="control-label col-md-3">Nome </label>
															<div class="col-md-9">
																<h:inputText id="nomeProdutoPesqModal" pt:name="nomeProdutoPesqModal" maxlength="50" styleClass="form-control" pt:placeholder="ex: Produto XPTO" 
																	value="#{bean.produtoModalMBean.produtoPesq.nome}">
																</h:inputText>
															</div>
														</div>
													
													</div>
												</div>
												<div class="row">
													<div class="col-md-14">
														<!-- BEGIN EXAMPLE TABLE PORTLET-->
														<div class="portlet light">
															<div class="portlet-body">
																<h4>Resultados</h4>
																<table class="table table-striped table-bordered table-hover" id="table_cadastro_produto_Modal">
																	<thead>
																		<tr>
																			<th width="10%">
																				 Imagem
																			</th>
																			<th>
																				 Código
																			</th>
																			<th>
																				 Nome
																			</th>
																			<th>
																				 Preço
																			</th>
																			<th width="2%">
																				 
																			</th>
																		</tr>
																	</thead>
																	<tbody>
																		<ui:repeat var="prod" id="produtoPesqList" value="#{bean.produtoModalMBean.produtoPesqList}">
																			<tr class="odd gradeX">
																				<td>
																					<a href="#{bean.serverContextPath}resources/theme/assets/admin/pages/media/works/img1.jpg" class="fancybox-button" data-rel="fancybox-button">
																						<img class="img-responsive" src="#{bean.produtoModalMBean.serverContextPath}resources/theme/assets/admin/pages/media/works/img1.jpg" alt="" />
																					</a>
																				</td>																			
																				<td>
																					#{prod.codProduto}
																				</td>
																				<td>
																					#{prod.nome}
																				</td>
																				<td>
																					<h:outputText value="#{prod.precoFinal}" >
																						<f:convertNumber type="currency" currencySymbol="R$"  />
																					</h:outputText>
																				</td>
																				<td>
																					<div class="margin-bottom-5">
																						<button class="btn btn-sm green margin-bottom" jsf:id="btn_pesquisa_select"  data-dismiss="modal">
																							<i class="fa fa-check"></i>
																							<f:ajax execute="@this" render="bodyControleRapido" listener="#{bean[selecionarProdutoMethod](prod)}" />
																						</button>
																					</div>
																				</td>
																			</tr>	
																		</ui:repeat>														
																	</tbody>
																</table>
															</div>
														</div>
														<!-- END EXAMPLE TABLE PORTLET-->
													</div>
												</div>											
											</div>
										</div>
									</div>	
									<script>TableManaged.initGeneric('table_cadastro_produto_Modal');</script>
								</div>
							</h:panelGroup>	
						</div>
					</div>
				</div>
			</div>
		</h:form>
	</div>
</f:view>